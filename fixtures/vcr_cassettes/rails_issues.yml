---
http_interactions:
- request:
    method: get
    uri: https://api.github.com/repos/rails/rails/issues
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/vnd.github.v3+json,application/vnd.github.beta+json;q=0.5,application/json;q=0.1
      Accept-Charset:
      - utf-8
      User-Agent:
      - Github API Ruby Gem 0.12.4
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 15 Apr 2016 11:43:56 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '26'
      X-Ratelimit-Reset:
      - '1460721668'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      - Accept-Encoding
      Etag:
      - W/"99573a41c5374454b60fd1aca4ff59a0"
      X-Github-Media-Type:
      - github.v3; format=json
      Link:
      - <https://api.github.com/repositories/8514/issues?page=2>; rel="next", <https://api.github.com/repositories/8514/issues?page=32>;
        rel="last"
      Access-Control-Expose-Headers:
      - ETag, Link, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset,
        X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Content-Security-Policy:
      - default-src 'none'
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-Xss-Protection:
      - 1; mode=block
      X-Served-By:
      - a474937f3b2fa272558fa6dc951018ad
      X-Github-Request-Id:
      - 57EEDD12:76D6:1207FA41:5710D3FC
    body:
      encoding: ASCII-8BIT
      string: '[{"url":"https://api.github.com/repos/rails/rails/issues/24559","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24559/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24559/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24559/events","html_url":"https://github.com/rails/rails/pull/24559","id":148624359,"number":24559,"title":"Fixed
        ActionCable::Connection::ClientSocketTest test","user":{"login":"vipulnsward","id":567626,"avatar_url":"https://avatars.githubusercontent.com/u/567626?v=3","gravatar_id":"","url":"https://api.github.com/users/vipulnsward","html_url":"https://github.com/vipulnsward","followers_url":"https://api.github.com/users/vipulnsward/followers","following_url":"https://api.github.com/users/vipulnsward/following{/other_user}","gists_url":"https://api.github.com/users/vipulnsward/gists{/gist_id}","starred_url":"https://api.github.com/users/vipulnsward/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vipulnsward/subscriptions","organizations_url":"https://api.github.com/users/vipulnsward/orgs","repos_url":"https://api.github.com/users/vipulnsward/repos","events_url":"https://api.github.com/users/vipulnsward/events{/privacy}","received_events_url":"https://api.github.com/users/vipulnsward/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"jeremy","id":199,"avatar_url":"https://avatars.githubusercontent.com/u/199?v=3","gravatar_id":"","url":"https://api.github.com/users/jeremy","html_url":"https://github.com/jeremy","followers_url":"https://api.github.com/users/jeremy/followers","following_url":"https://api.github.com/users/jeremy/following{/other_user}","gists_url":"https://api.github.com/users/jeremy/gists{/gist_id}","starred_url":"https://api.github.com/users/jeremy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeremy/subscriptions","organizations_url":"https://api.github.com/users/jeremy/orgs","repos_url":"https://api.github.com/users/jeremy/repos","events_url":"https://api.github.com/users/jeremy/events{/privacy}","received_events_url":"https://api.github.com/users/jeremy/received_events","type":"User","site_admin":false},"milestone":null,"comments":1,"created_at":"2016-04-15T10:35:22Z","updated_at":"2016-04-15T10:36:15Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24559","html_url":"https://github.com/rails/rails/pull/24559","diff_url":"https://github.com/rails/rails/pull/24559.diff","patch_url":"https://github.com/rails/rails/pull/24559.patch"},"body":"-
        Fixed ActionCable::Connection::ClientSocketTest that was overriding ActionCable::Connection::StreamTest
        test name\r\n- Only add attr_readers for required attributes"},{"url":"https://api.github.com/repos/rails/rails/issues/24556","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24556/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24556/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24556/events","html_url":"https://github.com/rails/rails/pull/24556","id":148567385,"number":24556,"title":"Add
        changelog for #24542","user":{"login":"vipulnsward","id":567626,"avatar_url":"https://avatars.githubusercontent.com/u/567626?v=3","gravatar_id":"","url":"https://api.github.com/users/vipulnsward","html_url":"https://github.com/vipulnsward","followers_url":"https://api.github.com/users/vipulnsward/followers","following_url":"https://api.github.com/users/vipulnsward/following{/other_user}","gists_url":"https://api.github.com/users/vipulnsward/gists{/gist_id}","starred_url":"https://api.github.com/users/vipulnsward/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vipulnsward/subscriptions","organizations_url":"https://api.github.com/users/vipulnsward/orgs","repos_url":"https://api.github.com/users/vipulnsward/repos","events_url":"https://api.github.com/users/vipulnsward/events{/privacy}","received_events_url":"https://api.github.com/users/vipulnsward/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"jeremy","id":199,"avatar_url":"https://avatars.githubusercontent.com/u/199?v=3","gravatar_id":"","url":"https://api.github.com/users/jeremy","html_url":"https://github.com/jeremy","followers_url":"https://api.github.com/users/jeremy/followers","following_url":"https://api.github.com/users/jeremy/following{/other_user}","gists_url":"https://api.github.com/users/jeremy/gists{/gist_id}","starred_url":"https://api.github.com/users/jeremy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeremy/subscriptions","organizations_url":"https://api.github.com/users/jeremy/orgs","repos_url":"https://api.github.com/users/jeremy/repos","events_url":"https://api.github.com/users/jeremy/events{/privacy}","received_events_url":"https://api.github.com/users/jeremy/received_events","type":"User","site_admin":false},"milestone":null,"comments":0,"created_at":"2016-04-15T06:37:41Z","updated_at":"2016-04-15T06:37:43Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24556","html_url":"https://github.com/rails/rails/pull/24556","diff_url":"https://github.com/rails/rails/pull/24556.diff","patch_url":"https://github.com/rails/rails/pull/24556.patch"},"body":"r?
        @jeremy "},{"url":"https://api.github.com/repos/rails/rails/issues/24555","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24555/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24555/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24555/events","html_url":"https://github.com/rails/rails/issues/24555","id":148565016,"number":24555,"title":"Shortcuts
        for `request.params[key]` and `request.params[key] = value` removed without
        deprecation.","user":{"login":"tgxworld","id":4335742,"avatar_url":"https://avatars.githubusercontent.com/u/4335742?v=3","gravatar_id":"","url":"https://api.github.com/users/tgxworld","html_url":"https://github.com/tgxworld","followers_url":"https://api.github.com/users/tgxworld/followers","following_url":"https://api.github.com/users/tgxworld/following{/other_user}","gists_url":"https://api.github.com/users/tgxworld/gists{/gist_id}","starred_url":"https://api.github.com/users/tgxworld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tgxworld/subscriptions","organizations_url":"https://api.github.com/users/tgxworld/orgs","repos_url":"https://api.github.com/users/tgxworld/repos","events_url":"https://api.github.com/users/tgxworld/events{/privacy}","received_events_url":"https://api.github.com/users/tgxworld/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/actionpack","name":"actionpack","color":"FFF700"}],"state":"open","locked":false,"assignee":null,"milestone":{"url":"https://api.github.com/repos/rails/rails/milestones/47","html_url":"https://github.com/rails/rails/milestones/5.0.0","labels_url":"https://api.github.com/repos/rails/rails/milestones/47/labels","id":1467326,"number":47,"title":"5.0.0","description":"","creator":{"login":"rafaelfranca","id":47848,"avatar_url":"https://avatars.githubusercontent.com/u/47848?v=3","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","site_admin":false},"open_issues":18,"closed_issues":425,"state":"open","created_at":"2015-12-18T21:17:59Z","updated_at":"2016-04-15T10:34:01Z","due_on":null,"closed_at":null},"comments":0,"created_at":"2016-04-15T06:22:16Z","updated_at":"2016-04-15T10:34:01Z","closed_at":null,"body":"When
        `ActionDispatch::Request` stopped inheriting from `Rack::Request`, the [methods](https://github.com/rack/rack/blob/241db7a81eb18860a0a7293675614472593c165a/lib/rack/request.rb#L19-L29)
        `[]` shortcut for  `request[''some-key'']` and `[]=` shortcut for `request[''some-key'']
        = ''something''` were removed. I was wondering if there should at least be
        a deprecation warning to make upgrading easier. Otherwise, it is hard to upgrade
        to Rails 5 when multiple gems are still accessing the params using those methods.\r\n\r\n\r\n\r\n###
        System configuration\r\n**Rails version**: Rails 5.0.0.beta3\r\n\r\n**Ruby
        version**: ruby 2.3.0p0\r\n"},{"url":"https://api.github.com/repos/rails/rails/issues/24554","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24554/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24554/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24554/events","html_url":"https://github.com/rails/rails/pull/24554","id":148508669,"number":24554,"title":"Memoize
        the `RouteSet#url_helpers` module","user":{"login":"jeffrafter","id":4064,"avatar_url":"https://avatars.githubusercontent.com/u/4064?v=3","gravatar_id":"","url":"https://api.github.com/users/jeffrafter","html_url":"https://github.com/jeffrafter","followers_url":"https://api.github.com/users/jeffrafter/followers","following_url":"https://api.github.com/users/jeffrafter/following{/other_user}","gists_url":"https://api.github.com/users/jeffrafter/gists{/gist_id}","starred_url":"https://api.github.com/users/jeffrafter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeffrafter/subscriptions","organizations_url":"https://api.github.com/users/jeffrafter/orgs","repos_url":"https://api.github.com/users/jeffrafter/repos","events_url":"https://api.github.com/users/jeffrafter/events{/privacy}","received_events_url":"https://api.github.com/users/jeffrafter/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/actionpack","name":"actionpack","color":"FFF700"}],"state":"open","locked":false,"assignee":{"login":"kaspth","id":350807,"avatar_url":"https://avatars.githubusercontent.com/u/350807?v=3","gravatar_id":"","url":"https://api.github.com/users/kaspth","html_url":"https://github.com/kaspth","followers_url":"https://api.github.com/users/kaspth/followers","following_url":"https://api.github.com/users/kaspth/following{/other_user}","gists_url":"https://api.github.com/users/kaspth/gists{/gist_id}","starred_url":"https://api.github.com/users/kaspth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaspth/subscriptions","organizations_url":"https://api.github.com/users/kaspth/orgs","repos_url":"https://api.github.com/users/kaspth/repos","events_url":"https://api.github.com/users/kaspth/events{/privacy}","received_events_url":"https://api.github.com/users/kaspth/received_events","type":"User","site_admin":false},"milestone":null,"comments":9,"created_at":"2016-04-14T23:10:25Z","updated_at":"2016-04-15T03:02:42Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24554","html_url":"https://github.com/rails/rails/pull/24554","diff_url":"https://github.com/rails/rails/pull/24554.diff","patch_url":"https://github.com/rails/rails/pull/24554.patch"},"body":"###
        Summary\r\n\r\nThis fixes a performance regression introduced between 4.1.x
        and 4.2.x.\r\n\r\nEvery call to a URL helper would create a new Module. Doing
        this repeatedly was not fast.\r\n\r\nFixes #23451"},{"url":"https://api.github.com/repos/rails/rails/issues/24552","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24552/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24552/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24552/events","html_url":"https://github.com/rails/rails/pull/24552","id":148406794,"number":24552,"title":"Raise
        `ArgumentError` when an invalid form is passed to `Date#to_time`","user":{"login":"yui-knk","id":5356517,"avatar_url":"https://avatars.githubusercontent.com/u/5356517?v=3","gravatar_id":"","url":"https://api.github.com/users/yui-knk","html_url":"https://github.com/yui-knk","followers_url":"https://api.github.com/users/yui-knk/followers","following_url":"https://api.github.com/users/yui-knk/following{/other_user}","gists_url":"https://api.github.com/users/yui-knk/gists{/gist_id}","starred_url":"https://api.github.com/users/yui-knk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yui-knk/subscriptions","organizations_url":"https://api.github.com/users/yui-knk/orgs","repos_url":"https://api.github.com/users/yui-knk/repos","events_url":"https://api.github.com/users/yui-knk/events{/privacy}","received_events_url":"https://api.github.com/users/yui-knk/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activesupport","name":"activesupport","color":"FC9300"}],"state":"open","locked":false,"assignee":{"login":"pixeltrix","id":6321,"avatar_url":"https://avatars.githubusercontent.com/u/6321?v=3","gravatar_id":"","url":"https://api.github.com/users/pixeltrix","html_url":"https://github.com/pixeltrix","followers_url":"https://api.github.com/users/pixeltrix/followers","following_url":"https://api.github.com/users/pixeltrix/following{/other_user}","gists_url":"https://api.github.com/users/pixeltrix/gists{/gist_id}","starred_url":"https://api.github.com/users/pixeltrix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pixeltrix/subscriptions","organizations_url":"https://api.github.com/users/pixeltrix/orgs","repos_url":"https://api.github.com/users/pixeltrix/repos","events_url":"https://api.github.com/users/pixeltrix/events{/privacy}","received_events_url":"https://api.github.com/users/pixeltrix/received_events","type":"User","site_admin":false},"milestone":null,"comments":1,"created_at":"2016-04-14T15:57:49Z","updated_at":"2016-04-14T16:26:26Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24552","html_url":"https://github.com/rails/rails/pull/24552","diff_url":"https://github.com/rails/rails/pull/24552.diff","patch_url":"https://github.com/rails/rails/pull/24552.patch"},"body":"Before
        this commit\r\n`NoMethodError: undefined method `form_name'' for Time:Class`
        is raised\r\nwhen an invalid argument is passed.\r\nIt is better to raise
        `ArgumentError` and show list of valid arguments\r\nto developers."},{"url":"https://api.github.com/repos/rails/rails/issues/24551","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24551/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24551/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24551/events","html_url":"https://github.com/rails/rails/pull/24551","id":148368890,"number":24551,"title":"Added
        notice when database successfully created or dropped.","user":{"login":"bogdanvlviv","id":6443532,"avatar_url":"https://avatars.githubusercontent.com/u/6443532?v=3","gravatar_id":"","url":"https://api.github.com/users/bogdanvlviv","html_url":"https://github.com/bogdanvlviv","followers_url":"https://api.github.com/users/bogdanvlviv/followers","following_url":"https://api.github.com/users/bogdanvlviv/following{/other_user}","gists_url":"https://api.github.com/users/bogdanvlviv/gists{/gist_id}","starred_url":"https://api.github.com/users/bogdanvlviv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bogdanvlviv/subscriptions","organizations_url":"https://api.github.com/users/bogdanvlviv/orgs","repos_url":"https://api.github.com/users/bogdanvlviv/repos","events_url":"https://api.github.com/users/bogdanvlviv/events{/privacy}","received_events_url":"https://api.github.com/users/bogdanvlviv/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"pixeltrix","id":6321,"avatar_url":"https://avatars.githubusercontent.com/u/6321?v=3","gravatar_id":"","url":"https://api.github.com/users/pixeltrix","html_url":"https://github.com/pixeltrix","followers_url":"https://api.github.com/users/pixeltrix/followers","following_url":"https://api.github.com/users/pixeltrix/following{/other_user}","gists_url":"https://api.github.com/users/pixeltrix/gists{/gist_id}","starred_url":"https://api.github.com/users/pixeltrix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pixeltrix/subscriptions","organizations_url":"https://api.github.com/users/pixeltrix/orgs","repos_url":"https://api.github.com/users/pixeltrix/repos","events_url":"https://api.github.com/users/pixeltrix/events{/privacy}","received_events_url":"https://api.github.com/users/pixeltrix/received_events","type":"User","site_admin":false},"milestone":null,"comments":7,"created_at":"2016-04-14T13:54:48Z","updated_at":"2016-04-15T08:31:16Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24551","html_url":"https://github.com/rails/rails/pull/24551","diff_url":"https://github.com/rails/rails/pull/24551.diff","patch_url":"https://github.com/rails/rails/pull/24551.patch"},"body":"Added
        notice when database successfully created or dropped.\r\n  \r\nExample:\r\n\r\n  ```\r\n  $
        bin/rails db:create\r\n  Created database ''blog_development''\r\n  Created
        database ''blog_test''\r\n  ```\r\n\r\n  ```\r\n  $ bin/rails db:drop\r\n  Dropped
        database ''blog_development''\r\n  Dropped database ''blog_test''\r\n  ```\r\n\r\nChanged
        older notices\r\n`blog_development  already exists` to `Database ''blog_development''
        already exists` and\r\n`Couldn''t drop blog_development` to `Couldn''t drop
        database ''blog_development''`."},{"url":"https://api.github.com/repos/rails/rails/issues/24547","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24547/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24547/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24547/events","html_url":"https://github.com/rails/rails/issues/24547","id":148340043,"number":24547,"title":"Unscoped
        block not work with association","user":{"login":"pioz","id":215905,"avatar_url":"https://avatars.githubusercontent.com/u/215905?v=3","gravatar_id":"","url":"https://api.github.com/users/pioz","html_url":"https://github.com/pioz","followers_url":"https://api.github.com/users/pioz/followers","following_url":"https://api.github.com/users/pioz/following{/other_user}","gists_url":"https://api.github.com/users/pioz/gists{/gist_id}","starred_url":"https://api.github.com/users/pioz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pioz/subscriptions","organizations_url":"https://api.github.com/users/pioz/orgs","repos_url":"https://api.github.com/users/pioz/repos","events_url":"https://api.github.com/users/pioz/events{/privacy}","received_events_url":"https://api.github.com/users/pioz/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"},{"url":"https://api.github.com/repos/rails/rails/labels/docs","name":"docs","color":"02d7e1"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":3,"created_at":"2016-04-14T12:04:57Z","updated_at":"2016-04-14T15:11:09Z","closed_at":null,"body":"###
        Steps to reproduce\r\n\r\nHere the test\r\n\r\n```\r\ngem ''activerecord'',
        ''4.2.6''\r\n\r\nrequire ''sqlite3''\r\nrequire ''active_record''\r\nrequire
        ''minitest/autorun''\r\n\r\n\r\nActiveRecord::Base.establish_connection(adapter:
        ''sqlite3'', database: '':memory:'')\r\n\r\nActiveRecord::Schema.define do\r\n  create_table(:users)
        do |t|\r\n    t.string :username\r\n    t.boolean :deactivated, default: false,
        null: false\r\n    t.timestamps null: false\r\n  end\r\n  create_table(:posts)
        do |t|\r\n    t.references :user, foreign_key: true\r\n    t.string :title\r\n    t.timestamps
        null: false\r\n  end\r\nend\r\n\r\n\r\nclass User < ActiveRecord::Base\r\n  has_many
        :posts\r\n\r\n  default_scope -> { where(deactivated: false) }\r\nend\r\n\r\nclass
        Post < ActiveRecord::Base\r\n  belongs_to :user\r\n\r\n  default_scope ->
        { joins(''LEFT OUTER JOIN users ON users.id = posts.user_id'').where(''users.deactivated''
        => false) }\r\nend\r\n\r\n\r\nclass BugTest < Minitest::Test\r\n  def test_unscoped_user\r\n    user
        = User.create!\r\n    post = Post.create!(user: user)\r\n\r\n    assert_equal
        1, User.all.size\r\n    assert_equal 1, Post.all.size\r\n\r\n    user.update(deactivated:
        true)\r\n\r\n    assert_equal 0, User.all.size\r\n    assert_equal 0, Post.all.size\r\n\r\n    unscoped_post
        = Post.unscoped.first\r\n    assert_equal post, unscoped_post\r\n    assert_nil
        unscoped_post.user\r\n    User.unscoped do\r\n      assert_equal user, unscoped_post.user\r\n    end\r\n  end\r\nend\r\n\r\n```\r\n\r\n###
        Actual behavior\r\nWhen I do\r\n```\r\nUser.unscoped do\r\n  post.user\r\nend\r\n```\r\nI
        get `nil` because user is deactivated (default_scope filter only not deactivated
        users). I expect instead of getting the deactivated user\r\n\r\n### System
        configuration\r\n**Rails version**: 4.2.6\r\n\r\n**Ruby version**: 2.3.0\r\n"},{"url":"https://api.github.com/repos/rails/rails/issues/24546","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24546/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24546/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24546/events","html_url":"https://github.com/rails/rails/pull/24546","id":148314469,"number":24546,"title":"Add
        to doc for add_reference function.","user":{"login":"elcubo","id":427669,"avatar_url":"https://avatars.githubusercontent.com/u/427669?v=3","gravatar_id":"","url":"https://api.github.com/users/elcubo","html_url":"https://github.com/elcubo","followers_url":"https://api.github.com/users/elcubo/followers","following_url":"https://api.github.com/users/elcubo/following{/other_user}","gists_url":"https://api.github.com/users/elcubo/gists{/gist_id}","starred_url":"https://api.github.com/users/elcubo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elcubo/subscriptions","organizations_url":"https://api.github.com/users/elcubo/orgs","repos_url":"https://api.github.com/users/elcubo/repos","events_url":"https://api.github.com/users/elcubo/events{/privacy}","received_events_url":"https://api.github.com/users/elcubo/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"},{"url":"https://api.github.com/repos/rails/rails/labels/docs","name":"docs","color":"02d7e1"}],"state":"open","locked":false,"assignee":{"login":"matthewd","id":1034,"avatar_url":"https://avatars.githubusercontent.com/u/1034?v=3","gravatar_id":"","url":"https://api.github.com/users/matthewd","html_url":"https://github.com/matthewd","followers_url":"https://api.github.com/users/matthewd/followers","following_url":"https://api.github.com/users/matthewd/following{/other_user}","gists_url":"https://api.github.com/users/matthewd/gists{/gist_id}","starred_url":"https://api.github.com/users/matthewd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthewd/subscriptions","organizations_url":"https://api.github.com/users/matthewd/orgs","repos_url":"https://api.github.com/users/matthewd/repos","events_url":"https://api.github.com/users/matthewd/events{/privacy}","received_events_url":"https://api.github.com/users/matthewd/received_events","type":"User","site_admin":false},"milestone":null,"comments":2,"created_at":"2016-04-14T10:14:31Z","updated_at":"2016-04-14T17:32:50Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24546","html_url":"https://github.com/rails/rails/pull/24546","diff_url":"https://github.com/rails/rails/pull/24546.diff","patch_url":"https://github.com/rails/rails/pull/24546.patch"},"body":"Added
        description of :references option."},{"url":"https://api.github.com/repos/rails/rails/issues/24544","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24544/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24544/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24544/events","html_url":"https://github.com/rails/rails/pull/24544","id":148278038,"number":24544,"title":"Add
        ulimit settings doc for ActionCable [skip ci]","user":{"login":"huacnlee","id":5518,"avatar_url":"https://avatars.githubusercontent.com/u/5518?v=3","gravatar_id":"","url":"https://api.github.com/users/huacnlee","html_url":"https://github.com/huacnlee","followers_url":"https://api.github.com/users/huacnlee/followers","following_url":"https://api.github.com/users/huacnlee/following{/other_user}","gists_url":"https://api.github.com/users/huacnlee/gists{/gist_id}","starred_url":"https://api.github.com/users/huacnlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huacnlee/subscriptions","organizations_url":"https://api.github.com/users/huacnlee/orgs","repos_url":"https://api.github.com/users/huacnlee/repos","events_url":"https://api.github.com/users/huacnlee/events{/privacy}","received_events_url":"https://api.github.com/users/huacnlee/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/actioncable","name":"actioncable","color":"bfdadc"},{"url":"https://api.github.com/repos/rails/rails/labels/docs","name":"docs","color":"02d7e1"}],"state":"open","locked":false,"assignee":{"login":"rafaelfranca","id":47848,"avatar_url":"https://avatars.githubusercontent.com/u/47848?v=3","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","site_admin":false},"milestone":null,"comments":3,"created_at":"2016-04-14T07:37:45Z","updated_at":"2016-04-14T17:30:51Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24544","html_url":"https://github.com/rails/rails/pull/24544","diff_url":"https://github.com/rails/rails/pull/24544.diff","patch_url":"https://github.com/rails/rails/pull/24544.patch"},"body":"Many
        Linux Server ulimit default values it too low, for example Ubuntu Server\r\n\r\n```bash\r\n$
        ulimit -Sn\r\n1024\r\n$ ulimit -Hn\r\n4096\r\n```\r\n\r\nBy my test, that
        default value can connect about 1000  clients, in general web application
        cases, this is not enough.\r\nSo need tell Action Cable users to change it."},{"url":"https://api.github.com/repos/rails/rails/issues/24535","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24535/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24535/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24535/events","html_url":"https://github.com/rails/rails/pull/24535","id":148055259,"number":24535,"title":"Update
        ActiveRecord associations documentation on :validate option","user":{"login":"tomash","id":38259,"avatar_url":"https://avatars.githubusercontent.com/u/38259?v=3","gravatar_id":"","url":"https://api.github.com/users/tomash","html_url":"https://github.com/tomash","followers_url":"https://api.github.com/users/tomash/followers","following_url":"https://api.github.com/users/tomash/following{/other_user}","gists_url":"https://api.github.com/users/tomash/gists{/gist_id}","starred_url":"https://api.github.com/users/tomash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomash/subscriptions","organizations_url":"https://api.github.com/users/tomash/orgs","repos_url":"https://api.github.com/users/tomash/repos","events_url":"https://api.github.com/users/tomash/events{/privacy}","received_events_url":"https://api.github.com/users/tomash/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"},{"url":"https://api.github.com/repos/rails/rails/labels/docs","name":"docs","color":"02d7e1"}],"state":"open","locked":false,"assignee":{"login":"matthewd","id":1034,"avatar_url":"https://avatars.githubusercontent.com/u/1034?v=3","gravatar_id":"","url":"https://api.github.com/users/matthewd","html_url":"https://github.com/matthewd","followers_url":"https://api.github.com/users/matthewd/followers","following_url":"https://api.github.com/users/matthewd/following{/other_user}","gists_url":"https://api.github.com/users/matthewd/gists{/gist_id}","starred_url":"https://api.github.com/users/matthewd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthewd/subscriptions","organizations_url":"https://api.github.com/users/matthewd/orgs","repos_url":"https://api.github.com/users/matthewd/repos","events_url":"https://api.github.com/users/matthewd/events{/privacy}","received_events_url":"https://api.github.com/users/matthewd/received_events","type":"User","site_admin":false},"milestone":null,"comments":7,"created_at":"2016-04-13T13:06:52Z","updated_at":"2016-04-14T11:27:30Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24535","html_url":"https://github.com/rails/rails/pull/24535","diff_url":"https://github.com/rails/rails/pull/24535.diff","patch_url":"https://github.com/rails/rails/pull/24535.patch"},"body":"###
        Summary\r\n\r\nDocumentation on AR associations updated to avoid confusion
        in regard to how `:validate` option works, and referring to `validates_associated`
        in case different functionality is expected.\r\n\r\nWithout this, the description
        of `:validate` option for associations makes it easy to confuse (in regards
        to expectations) with behavior provided by `validates_associated`.\r\n\r\nThis
        PR is caused by issue #24532\r\n\r\nThis is my first PR to rails/rails, please
        let me know if I missed something."},{"url":"https://api.github.com/repos/rails/rails/issues/24531","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24531/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24531/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24531/events","html_url":"https://github.com/rails/rails/pull/24531","id":147992489,"number":24531,"title":"configurable
        token length","user":{"login":"przbadu","id":4189129,"avatar_url":"https://avatars.githubusercontent.com/u/4189129?v=3","gravatar_id":"","url":"https://api.github.com/users/przbadu","html_url":"https://github.com/przbadu","followers_url":"https://api.github.com/users/przbadu/followers","following_url":"https://api.github.com/users/przbadu/following{/other_user}","gists_url":"https://api.github.com/users/przbadu/gists{/gist_id}","starred_url":"https://api.github.com/users/przbadu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przbadu/subscriptions","organizations_url":"https://api.github.com/users/przbadu/orgs","repos_url":"https://api.github.com/users/przbadu/repos","events_url":"https://api.github.com/users/przbadu/events{/privacy}","received_events_url":"https://api.github.com/users/przbadu/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"pixeltrix","id":6321,"avatar_url":"https://avatars.githubusercontent.com/u/6321?v=3","gravatar_id":"","url":"https://api.github.com/users/pixeltrix","html_url":"https://github.com/pixeltrix","followers_url":"https://api.github.com/users/pixeltrix/followers","following_url":"https://api.github.com/users/pixeltrix/following{/other_user}","gists_url":"https://api.github.com/users/pixeltrix/gists{/gist_id}","starred_url":"https://api.github.com/users/pixeltrix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pixeltrix/subscriptions","organizations_url":"https://api.github.com/users/pixeltrix/orgs","repos_url":"https://api.github.com/users/pixeltrix/repos","events_url":"https://api.github.com/users/pixeltrix/events{/privacy}","received_events_url":"https://api.github.com/users/pixeltrix/received_events","type":"User","site_admin":false},"milestone":null,"comments":1,"created_at":"2016-04-13T08:59:00Z","updated_at":"2016-04-13T09:32:27Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24531","html_url":"https://github.com/rails/rails/pull/24531","diff_url":"https://github.com/rails/rails/pull/24531.diff","patch_url":"https://github.com/rails/rails/pull/24531.patch"},"body":"User
        Should be able to configure token length. Suppose we can have multiple tokens
        (secret_key, secret_token) and we want secret_token to be of default size
        (24 char) but want to make secret_token of more characters e.g 80 characters.\r\n\r\nHere
        are the Pull Requests already done in `has_secure_token` gem independently:\r\nhttps://github.com/robertomiranda/has_secure_token/pull/11\r\nhttps://github.com/robertomiranda/has_secure_token/pull/17\r\n\r\nI
        think this PR can be really helpful.\r\n\r\nThanks"},{"url":"https://api.github.com/repos/rails/rails/issues/24530","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24530/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24530/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24530/events","html_url":"https://github.com/rails/rails/issues/24530","id":147969537,"number":24530,"title":"confusing
        usage of capitalized first letter in ''Getting Started with Rail'' documentation","user":{"login":"martinmoreau","id":18348609,"avatar_url":"https://avatars.githubusercontent.com/u/18348609?v=3","gravatar_id":"","url":"https://api.github.com/users/martinmoreau","html_url":"https://github.com/martinmoreau","followers_url":"https://api.github.com/users/martinmoreau/followers","following_url":"https://api.github.com/users/martinmoreau/following{/other_user}","gists_url":"https://api.github.com/users/martinmoreau/gists{/gist_id}","starred_url":"https://api.github.com/users/martinmoreau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martinmoreau/subscriptions","organizations_url":"https://api.github.com/users/martinmoreau/orgs","repos_url":"https://api.github.com/users/martinmoreau/repos","events_url":"https://api.github.com/users/martinmoreau/events{/privacy}","received_events_url":"https://api.github.com/users/martinmoreau/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/docs","name":"docs","color":"02d7e1"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":6,"created_at":"2016-04-13T07:23:19Z","updated_at":"2016-04-13T07:47:39Z","closed_at":null,"body":"#
        Steps to reproduce\r\nGo to chapter 6.4 ''Generating a Controller'' of the
        ''Getting Started with Rails'' guide where the following  is stated: ''$ bin/rails
        generate controller Comments''\r\n\r\n# Expected behavior\r\nIt''s confusing
        that the first letter of the controller name is capitalized, because only
        Model names have a capitalized first letter. Also throughout the guide the
        generation of the article controller is written with a lower case first letter
        for the controller name.\r\nIt''s true that the rails generate command ignores
        the capital letter and generates the controller with a lower case first letter,
        but I find this confusing for the reader.\r\n\r\n# Suggestion\r\nI suggest
        to use a lower case first letter like so: ''$ bin/rails generate controller
        comments''.\r\nThen add a information box where there is stated that rails
        always generates controllers with lower case first letters despite the use
        of capital letters in de generate command.\r\n"},{"url":"https://api.github.com/repos/rails/rails/issues/24529","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24529/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24529/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24529/events","html_url":"https://github.com/rails/rails/pull/24529","id":147958204,"number":24529,"title":"WIP:
        Add Attributes API to release notes","user":{"login":"vipulnsward","id":567626,"avatar_url":"https://avatars.githubusercontent.com/u/567626?v=3","gravatar_id":"","url":"https://api.github.com/users/vipulnsward","html_url":"https://github.com/vipulnsward","followers_url":"https://api.github.com/users/vipulnsward/followers","following_url":"https://api.github.com/users/vipulnsward/following{/other_user}","gists_url":"https://api.github.com/users/vipulnsward/gists{/gist_id}","starred_url":"https://api.github.com/users/vipulnsward/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vipulnsward/subscriptions","organizations_url":"https://api.github.com/users/vipulnsward/orgs","repos_url":"https://api.github.com/users/vipulnsward/repos","events_url":"https://api.github.com/users/vipulnsward/events{/privacy}","received_events_url":"https://api.github.com/users/vipulnsward/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"},{"url":"https://api.github.com/repos/rails/rails/labels/docs","name":"docs","color":"02d7e1"}],"state":"open","locked":false,"assignee":{"login":"sgrif","id":1529387,"avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=3","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","site_admin":false},"milestone":null,"comments":4,"created_at":"2016-04-13T06:20:36Z","updated_at":"2016-04-14T13:33:02Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24529","html_url":"https://github.com/rails/rails/pull/24529","diff_url":"https://github.com/rails/rails/pull/24529.diff","patch_url":"https://github.com/rails/rails/pull/24529.patch"},"body":"Still
        working over it.\r\nr? @sgrif "},{"url":"https://api.github.com/repos/rails/rails/issues/24528","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24528/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24528/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24528/events","html_url":"https://github.com/rails/rails/issues/24528","id":147871086,"number":24528,"title":"ActiveRecord::Base.table_name_prefix
        / suffix schema dumper allows for conflicts with unprefixed tables","user":{"login":"Empact","id":5470,"avatar_url":"https://avatars.githubusercontent.com/u/5470?v=3","gravatar_id":"","url":"https://api.github.com/users/Empact","html_url":"https://github.com/Empact","followers_url":"https://api.github.com/users/Empact/followers","following_url":"https://api.github.com/users/Empact/following{/other_user}","gists_url":"https://api.github.com/users/Empact/gists{/gist_id}","starred_url":"https://api.github.com/users/Empact/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Empact/subscriptions","organizations_url":"https://api.github.com/users/Empact/orgs","repos_url":"https://api.github.com/users/Empact/repos","events_url":"https://api.github.com/users/Empact/events{/privacy}","received_events_url":"https://api.github.com/users/Empact/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"},{"url":"https://api.github.com/repos/rails/rails/labels/With%20reproduction%20steps","name":"With
        reproduction steps","color":"009800"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":4,"created_at":"2016-04-12T20:59:47Z","updated_at":"2016-04-13T20:49:36Z","closed_at":null,"body":"###
        Steps to reproduce\r\n\r\nWhen ActiveRecord::Base.table_name_prefix/suffix
        are used the schema dumper intentionally avoids printing the prefix and suffix
        in the schema dump. This means that if the database also includes tables of
        the same name sans prefix/suffix, there will be a conflict between them when
        attempting to set up the test database, etc.\r\n\r\n### Expected behavior\r\nGiven
        a table \"accounts\" and a table \"my_app_accounts\", with a table_name_prefix
        of \"my_app_\", I expect the schema dumper to either:\r\n\r\n1) Output the
        tables with non-conflicting naming, e.g. their actual table names, or with
        adjusted names + some option signifying the table is prefixed/suffixed and
        therefore enabling the full table name to be generated.\r\n2) Not output the
        non-prefixed/suffixed table. This would be consistent with a general view
        of ActiveRecord prefixing that assumes only the prefixed/suffixed tables are
        relevant to ActiveRecord.\r\n\r\nI tend to think that 2) is not a good assumption
        (as it''s possible for other tables to be relied on indirectly, e.g. through
        explicit statements) so I propose some version of 1) be adopted.\r\n\r\n###
        Actual behavior\r\nGiven a table \"accounts\" and a table \"my_app_accounts\",
        with a table_name_prefix of \"my_app_\", the schema dumper will output two
        tables named \"accounts\".\r\n\r\n### System configuration\r\n**Rails version**:
        5.0.0.beta3\r\n\r\n**Ruby version**: 2.3.0p0 (2015-12-25 revision 53290) [x86_64-darwin15]\r\n"},{"url":"https://api.github.com/repos/rails/rails/issues/24527","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24527/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24527/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24527/events","html_url":"https://github.com/rails/rails/issues/24527","id":147850982,"number":24527,"title":"has_many
        through validation error when foreign_key is specified","user":{"login":"dkniffin","id":1680080,"avatar_url":"https://avatars.githubusercontent.com/u/1680080?v=3","gravatar_id":"","url":"https://api.github.com/users/dkniffin","html_url":"https://github.com/dkniffin","followers_url":"https://api.github.com/users/dkniffin/followers","following_url":"https://api.github.com/users/dkniffin/following{/other_user}","gists_url":"https://api.github.com/users/dkniffin/gists{/gist_id}","starred_url":"https://api.github.com/users/dkniffin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkniffin/subscriptions","organizations_url":"https://api.github.com/users/dkniffin/orgs","repos_url":"https://api.github.com/users/dkniffin/repos","events_url":"https://api.github.com/users/dkniffin/events{/privacy}","received_events_url":"https://api.github.com/users/dkniffin/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"},{"url":"https://api.github.com/repos/rails/rails/labels/With%20reproduction%20steps","name":"With
        reproduction steps","color":"009800"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":3,"created_at":"2016-04-12T19:32:50Z","updated_at":"2016-04-14T23:35:31Z","closed_at":null,"body":"###
        Steps to reproduce\r\n\r\n[Gist](https://gist.github.com/dkniffin/e1645ab3f94dabeda7ad1096c96c8f07)\r\n\r\nWhen
        I create some models with a `has_many :through` association, with a foreign_key,
        and I add validation on the join table, I get a validation failure. It appears
        to me that the issue is AR is trying to save the join model (ProductCategory)
        before the parent model (Product).\r\n\r\n````ruby\r\nclass Product < ActiveRecord::Base\r\n  has_many
        :product_categories, foreign_key: :product_id\r\n  has_many :categories, through:
        :product_categories\r\nend\r\n\r\nclass Category < ActiveRecord::Base\r\n  has_many
        :product_categories, dependent: :destroy\r\n  has_many :products, through:
        :product_categories\r\nend\r\n\r\nclass ProductCategory < ActiveRecord::Base\r\n  belongs_to
        :product, foreign_key: ''product_id'', inverse_of: :product_categories\r\n  belongs_to
        :category, inverse_of: :product_categories\r\n  \r\n  validates :product,
        :category, presence: true\r\nend\r\n````\r\n\r\nIf it helps, I''ve also uploaded
        a bare-bones rails project that also reproduces the issue: https://github.com/dkniffin/rails_bug_has_many_through_with_foreign_key\r\n\r\n###
        Expected behavior\r\nThe model should save succesfully.\r\n\r\n### Actual
        behavior\r\nIt errors with \"Product categories is invalid\"\r\n\r\n### System
        configuration\r\n**Rails version**:  Rails 4.2.6\r\n\r\n**Ruby version**:
        ruby 2.2.3p173 (2015-08-18 revision 51636) [x86_64-darwin14]\r\n"},{"url":"https://api.github.com/repos/rails/rails/issues/24526","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24526/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24526/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24526/events","html_url":"https://github.com/rails/rails/issues/24526","id":147837325,"number":24526,"title":"dependent:
        :restrict_with_error not working properly","user":{"login":"stephanngamedev","id":3025661,"avatar_url":"https://avatars.githubusercontent.com/u/3025661?v=3","gravatar_id":"","url":"https://api.github.com/users/stephanngamedev","html_url":"https://github.com/stephanngamedev","followers_url":"https://api.github.com/users/stephanngamedev/followers","following_url":"https://api.github.com/users/stephanngamedev/following{/other_user}","gists_url":"https://api.github.com/users/stephanngamedev/gists{/gist_id}","starred_url":"https://api.github.com/users/stephanngamedev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stephanngamedev/subscriptions","organizations_url":"https://api.github.com/users/stephanngamedev/orgs","repos_url":"https://api.github.com/users/stephanngamedev/repos","events_url":"https://api.github.com/users/stephanngamedev/events{/privacy}","received_events_url":"https://api.github.com/users/stephanngamedev/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":5,"created_at":"2016-04-12T18:37:02Z","updated_at":"2016-04-12T19:51:16Z","closed_at":null,"body":"###
        Steps to reproduce\r\n```ruby\r\nclass Blog < ActiveRecord::Base\r\n\thas_many
        :users, dependent: :destroy\r\nend\r\n\r\nclass User < ActiveRecord::Base\r\n\thas_many
        :posts, dependent: :restrict_with_error\r\nend\r\n\r\nclass Post < ActiveRecord::Base\r\n\tbelongs_to
        :user\r\nend\r\n\r\nclass BugTest < Minitest::Test\r\n\tdef test_dependent_destroy\r\n\t\tblog
        = Blog.create!\r\n\r\n\t\tuser = blog.users.create!\r\n\r\n\t\tpost = user.posts.create!\r\n\r\n\t\tuser.destroy\r\n\t\tassert_equal
        true, user.errors[:base].any? #ok\r\n\r\n\t\tblog.destroy #throw a exception
        here =(\r\n\t\tassert_equal true, blog.errors[:base].any?\r\n\tend\r\nend\r\n```\r\nFile
        for testing: https://gist.github.com/stephanngamedev/1944e2c78895ecac577af1f43c74543f\r\n\r\n###
        Expected behavior\r\n`blog.destroy` should add an error on blog object, \r\n\r\n###
        Actual behavior\r\nBut it is throwing an exception\r\n\r\n### System configuration\r\n**Rails
        version**: 4.2.5.1\r\n\r\n**Ruby version**: 2.3.0"},{"url":"https://api.github.com/repos/rails/rails/issues/24521","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24521/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24521/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24521/events","html_url":"https://github.com/rails/rails/pull/24521","id":147743812,"number":24521,"title":"Enable
        logging of remote IP addresses behind local proxies in the application log","user":{"login":"norc","id":328950,"avatar_url":"https://avatars.githubusercontent.com/u/328950?v=3","gravatar_id":"","url":"https://api.github.com/users/norc","html_url":"https://github.com/norc","followers_url":"https://api.github.com/users/norc/followers","following_url":"https://api.github.com/users/norc/following{/other_user}","gists_url":"https://api.github.com/users/norc/gists{/gist_id}","starred_url":"https://api.github.com/users/norc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/norc/subscriptions","organizations_url":"https://api.github.com/users/norc/orgs","repos_url":"https://api.github.com/users/norc/repos","events_url":"https://api.github.com/users/norc/events{/privacy}","received_events_url":"https://api.github.com/users/norc/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/railties","name":"railties","color":"8BE06E"}],"state":"open","locked":false,"assignee":{"login":"jeremy","id":199,"avatar_url":"https://avatars.githubusercontent.com/u/199?v=3","gravatar_id":"","url":"https://api.github.com/users/jeremy","html_url":"https://github.com/jeremy","followers_url":"https://api.github.com/users/jeremy/followers","following_url":"https://api.github.com/users/jeremy/following{/other_user}","gists_url":"https://api.github.com/users/jeremy/gists{/gist_id}","starred_url":"https://api.github.com/users/jeremy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeremy/subscriptions","organizations_url":"https://api.github.com/users/jeremy/orgs","repos_url":"https://api.github.com/users/jeremy/repos","events_url":"https://api.github.com/users/jeremy/events{/privacy}","received_events_url":"https://api.github.com/users/jeremy/received_events","type":"User","site_admin":false},"milestone":null,"comments":6,"created_at":"2016-04-12T12:59:55Z","updated_at":"2016-04-13T04:59:22Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24521","html_url":"https://github.com/rails/rails/pull/24521","diff_url":"https://github.com/rails/rails/pull/24521.diff","patch_url":"https://github.com/rails/rails/pull/24521.patch"},"body":"If
        Rails is behind a proxy server, the log will show the IP address of the proxy
        for each request, rather than the remote IP address. I feel that this information
        is rarely if ever useful.\r\n\r\nMy change makes the logger use request.remote_ip,
        which makes a smart guess at the remote IP address by considering CLIENT_IP
        / X_FORWARDED_FOR and checking against the list of trusted proxies."},{"url":"https://api.github.com/repos/rails/rails/issues/24517","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24517/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24517/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24517/events","html_url":"https://github.com/rails/rails/pull/24517","id":147680618,"number":24517,"title":"Restore
        Hash#transform_keys behavior to always return a Hash instance","user":{"login":"estolfo","id":699369,"avatar_url":"https://avatars.githubusercontent.com/u/699369?v=3","gravatar_id":"","url":"https://api.github.com/users/estolfo","html_url":"https://github.com/estolfo","followers_url":"https://api.github.com/users/estolfo/followers","following_url":"https://api.github.com/users/estolfo/following{/other_user}","gists_url":"https://api.github.com/users/estolfo/gists{/gist_id}","starred_url":"https://api.github.com/users/estolfo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/estolfo/subscriptions","organizations_url":"https://api.github.com/users/estolfo/orgs","repos_url":"https://api.github.com/users/estolfo/repos","events_url":"https://api.github.com/users/estolfo/events{/privacy}","received_events_url":"https://api.github.com/users/estolfo/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activesupport","name":"activesupport","color":"FC9300"}],"state":"open","locked":false,"assignee":{"login":"eileencodes","id":1080678,"avatar_url":"https://avatars.githubusercontent.com/u/1080678?v=3","gravatar_id":"","url":"https://api.github.com/users/eileencodes","html_url":"https://github.com/eileencodes","followers_url":"https://api.github.com/users/eileencodes/followers","following_url":"https://api.github.com/users/eileencodes/following{/other_user}","gists_url":"https://api.github.com/users/eileencodes/gists{/gist_id}","starred_url":"https://api.github.com/users/eileencodes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eileencodes/subscriptions","organizations_url":"https://api.github.com/users/eileencodes/orgs","repos_url":"https://api.github.com/users/eileencodes/repos","events_url":"https://api.github.com/users/eileencodes/events{/privacy}","received_events_url":"https://api.github.com/users/eileencodes/received_events","type":"User","site_admin":false},"milestone":null,"comments":5,"created_at":"2016-04-12T08:50:58Z","updated_at":"2016-04-12T20:53:43Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24517","html_url":"https://github.com/rails/rails/pull/24517","diff_url":"https://github.com/rails/rails/pull/24517.diff","patch_url":"https://github.com/rails/rails/pull/24517.patch"},"body":"###
        Summary\r\n\r\nA failure in mongoid''s test suite alerted me to a behavior
        difference between activesupport 4.1 and 4.2:\r\n\r\n* activesupport 4.1:
        ``Hash#symbolize_keys`` returns a ``Hash``.\r\n* activesupport 4.2: ``Hash#symbolize_keys``
        returns an instance of ``self.class``.\r\n\r\n[Here](https://github.com/rails/rails/commit/f1bad130d0c9bd77c94e43b696adca56c46a66aa)
        is the related commit.\r\nThis behavior change is significant when ``self``
        inherits from ``Hash``. For example, a ``BSON::Document`` (defined in the
        bson gem, on which mongoid depends) inherits from ``Hash``:\r\n\r\n```ruby\r\n\r\n>
        ActiveSupport.version\r\n=> Gem::Version.new(\"4.1.15\")\r\n> doc = BSON::Document.new(\"a\"
        => 1)\r\n=> {\"a\"=>1}\r\n> doc.symbolize_keys\r\n=> {:a=>1}\r\n> doc.symbolize_keys.class\r\n=>
        Hash\r\n```\r\n\r\n```ruby\r\n> ActiveSupport.version\r\n=> Gem::Version.new(\"4.2.0\")\r\n>
        doc = BSON::Document.new(\"a\" => 1)\r\n=> {\"a\"=>1}\r\n> doc.symbolize_keys\r\n=>
        {\"a\"=>1}\r\n> doc.symbolize_keys.class\r\n=> BSON::Document\r\n```"},{"url":"https://api.github.com/repos/rails/rails/issues/24510","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24510/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24510/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24510/events","html_url":"https://github.com/rails/rails/pull/24510","id":147556444,"number":24510,"title":"Make
        variable_size_secure_compare public","user":{"login":"vipulnsward","id":567626,"avatar_url":"https://avatars.githubusercontent.com/u/567626?v=3","gravatar_id":"","url":"https://api.github.com/users/vipulnsward","html_url":"https://github.com/vipulnsward","followers_url":"https://api.github.com/users/vipulnsward/followers","following_url":"https://api.github.com/users/vipulnsward/following{/other_user}","gists_url":"https://api.github.com/users/vipulnsward/gists{/gist_id}","starred_url":"https://api.github.com/users/vipulnsward/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vipulnsward/subscriptions","organizations_url":"https://api.github.com/users/vipulnsward/orgs","repos_url":"https://api.github.com/users/vipulnsward/repos","events_url":"https://api.github.com/users/vipulnsward/events{/privacy}","received_events_url":"https://api.github.com/users/vipulnsward/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activesupport","name":"activesupport","color":"FC9300"},{"url":"https://api.github.com/repos/rails/rails/labels/docs","name":"docs","color":"02d7e1"}],"state":"open","locked":false,"assignee":{"login":"tenderlove","id":3124,"avatar_url":"https://avatars.githubusercontent.com/u/3124?v=3","gravatar_id":"","url":"https://api.github.com/users/tenderlove","html_url":"https://github.com/tenderlove","followers_url":"https://api.github.com/users/tenderlove/followers","following_url":"https://api.github.com/users/tenderlove/following{/other_user}","gists_url":"https://api.github.com/users/tenderlove/gists{/gist_id}","starred_url":"https://api.github.com/users/tenderlove/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tenderlove/subscriptions","organizations_url":"https://api.github.com/users/tenderlove/orgs","repos_url":"https://api.github.com/users/tenderlove/repos","events_url":"https://api.github.com/users/tenderlove/events{/privacy}","received_events_url":"https://api.github.com/users/tenderlove/received_events","type":"User","site_admin":true},"milestone":null,"comments":2,"created_at":"2016-04-11T21:12:27Z","updated_at":"2016-04-13T08:07:13Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24510","html_url":"https://github.com/rails/rails/pull/24510","diff_url":"https://github.com/rails/rails/pull/24510.diff","patch_url":"https://github.com/rails/rails/pull/24510.patch"},"body":"Ideally
        one would use `variable_size_secure_compare` over `secure_compare`, since
        its not leaking length information.\r\n\r\nSo make it public as well, as an
        option to `secure_compare` of variable length strings.\r\n\r\nr? @tenderlove
        \r\n"},{"url":"https://api.github.com/repos/rails/rails/issues/24509","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24509/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24509/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24509/events","html_url":"https://github.com/rails/rails/pull/24509","id":147544007,"number":24509,"title":"Handle
        destroyed assets with id on new record via nested_assets","user":{"login":"will-in-wi","id":1298231,"avatar_url":"https://avatars.githubusercontent.com/u/1298231?v=3","gravatar_id":"","url":"https://api.github.com/users/will-in-wi","html_url":"https://github.com/will-in-wi","followers_url":"https://api.github.com/users/will-in-wi/followers","following_url":"https://api.github.com/users/will-in-wi/following{/other_user}","gists_url":"https://api.github.com/users/will-in-wi/gists{/gist_id}","starred_url":"https://api.github.com/users/will-in-wi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/will-in-wi/subscriptions","organizations_url":"https://api.github.com/users/will-in-wi/orgs","repos_url":"https://api.github.com/users/will-in-wi/repos","events_url":"https://api.github.com/users/will-in-wi/events{/privacy}","received_events_url":"https://api.github.com/users/will-in-wi/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"rafaelfranca","id":47848,"avatar_url":"https://avatars.githubusercontent.com/u/47848?v=3","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","site_admin":false},"milestone":null,"comments":3,"created_at":"2016-04-11T20:22:54Z","updated_at":"2016-04-11T21:13:48Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24509","html_url":"https://github.com/rails/rails/pull/24509","diff_url":"https://github.com/rails/rails/pull/24509.diff","patch_url":"https://github.com/rails/rails/pull/24509.patch"},"body":"My
        use case is that I have a form which takes a source record and uses it to
        prefill a creation form for a new record. The source record has child records,
        and when it fills the form and the user (using the nested_forms gem) removes
        the child records, the child records are passed to the create action with
        an ID and _destroy=1. Rails throws an error at this point, something like:
        `Couldn''t find ChildModel with ID=275425 for ParentModel with ID=`.\r\n\r\nI
        worked around this in my app by rejecting any entries with _destroy==1. However,
        this seems like something Rails may like to handle upstream. This PR contains
        a code patch and test case to this end.\r\n\r\nI''m using Rails 4.2, so I
        patched that version. If desired, I''ll try to rebase this against master.\r\n\r\nThanks!"},{"url":"https://api.github.com/repos/rails/rails/issues/24507","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24507/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24507/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24507/events","html_url":"https://github.com/rails/rails/pull/24507","id":147507505,"number":24507,"title":"ActiveRecord
        remove_index fix for 5.0.0","user":{"login":"sevaorlov","id":1062645,"avatar_url":"https://avatars.githubusercontent.com/u/1062645?v=3","gravatar_id":"","url":"https://api.github.com/users/sevaorlov","html_url":"https://github.com/sevaorlov","followers_url":"https://api.github.com/users/sevaorlov/followers","following_url":"https://api.github.com/users/sevaorlov/following{/other_user}","gists_url":"https://api.github.com/users/sevaorlov/gists{/gist_id}","starred_url":"https://api.github.com/users/sevaorlov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sevaorlov/subscriptions","organizations_url":"https://api.github.com/users/sevaorlov/orgs","repos_url":"https://api.github.com/users/sevaorlov/repos","events_url":"https://api.github.com/users/sevaorlov/events{/privacy}","received_events_url":"https://api.github.com/users/sevaorlov/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"matthewd","id":1034,"avatar_url":"https://avatars.githubusercontent.com/u/1034?v=3","gravatar_id":"","url":"https://api.github.com/users/matthewd","html_url":"https://github.com/matthewd","followers_url":"https://api.github.com/users/matthewd/followers","following_url":"https://api.github.com/users/matthewd/following{/other_user}","gists_url":"https://api.github.com/users/matthewd/gists{/gist_id}","starred_url":"https://api.github.com/users/matthewd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthewd/subscriptions","organizations_url":"https://api.github.com/users/matthewd/orgs","repos_url":"https://api.github.com/users/matthewd/repos","events_url":"https://api.github.com/users/matthewd/events{/privacy}","received_events_url":"https://api.github.com/users/matthewd/received_events","type":"User","site_admin":false},"milestone":null,"comments":1,"created_at":"2016-04-11T18:04:41Z","updated_at":"2016-04-11T21:24:30Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24507","html_url":"https://github.com/rails/rails/pull/24507","diff_url":"https://github.com/rails/rails/pull/24507.diff","patch_url":"https://github.com/rails/rails/pull/24507.patch"},"body":"###
        Summary\r\n\r\nThere is no need to fetch all table indexes in remove_index
        if name is specified. If name is wrong, then StatementInvalid will be raised.\r\nfixes
        https://github.com/rails/rails/issues/24359\r\n\r\n### Other Information\r\n\r\nIf
        column parameter is specified, then indexes are fetched and checked against
        that column. So `remove_index :a_table, name: :expr_index` won''t remove an
        index anyway if that index is expression index in postgresql."},{"url":"https://api.github.com/repos/rails/rails/issues/24503","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24503/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24503/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24503/events","html_url":"https://github.com/rails/rails/pull/24503","id":147316098,"number":24503,"title":"Add
        missing test case for record_fetched_greater_than config","user":{"login":"prathamesh-sonpatki","id":621238,"avatar_url":"https://avatars.githubusercontent.com/u/621238?v=3","gravatar_id":"","url":"https://api.github.com/users/prathamesh-sonpatki","html_url":"https://github.com/prathamesh-sonpatki","followers_url":"https://api.github.com/users/prathamesh-sonpatki/followers","following_url":"https://api.github.com/users/prathamesh-sonpatki/following{/other_user}","gists_url":"https://api.github.com/users/prathamesh-sonpatki/gists{/gist_id}","starred_url":"https://api.github.com/users/prathamesh-sonpatki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prathamesh-sonpatki/subscriptions","organizations_url":"https://api.github.com/users/prathamesh-sonpatki/orgs","repos_url":"https://api.github.com/users/prathamesh-sonpatki/repos","events_url":"https://api.github.com/users/prathamesh-sonpatki/events{/privacy}","received_events_url":"https://api.github.com/users/prathamesh-sonpatki/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"rafaelfranca","id":47848,"avatar_url":"https://avatars.githubusercontent.com/u/47848?v=3","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","site_admin":false},"milestone":null,"comments":0,"created_at":"2016-04-11T04:57:43Z","updated_at":"2016-04-11T04:57:52Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24503","html_url":"https://github.com/rails/rails/pull/24503","diff_url":"https://github.com/rails/rails/pull/24503.diff","patch_url":"https://github.com/rails/rails/pull/24503.patch"},"body":"-
        The negative scenario test case was missing earlier.\r\n\r\nr? @rafaelfranca
        "},{"url":"https://api.github.com/repos/rails/rails/issues/24501","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24501/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24501/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24501/events","html_url":"https://github.com/rails/rails/pull/24501","id":147267536,"number":24501,"title":"Add
        a query_cache enabled/disable config","user":{"login":"arthurnn","id":833383,"avatar_url":"https://avatars.githubusercontent.com/u/833383?v=3","gravatar_id":"","url":"https://api.github.com/users/arthurnn","html_url":"https://github.com/arthurnn","followers_url":"https://api.github.com/users/arthurnn/followers","following_url":"https://api.github.com/users/arthurnn/following{/other_user}","gists_url":"https://api.github.com/users/arthurnn/gists{/gist_id}","starred_url":"https://api.github.com/users/arthurnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arthurnn/subscriptions","organizations_url":"https://api.github.com/users/arthurnn/orgs","repos_url":"https://api.github.com/users/arthurnn/repos","events_url":"https://api.github.com/users/arthurnn/events{/privacy}","received_events_url":"https://api.github.com/users/arthurnn/received_events","type":"User","site_admin":true},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":0,"created_at":"2016-04-10T21:08:57Z","updated_at":"2016-04-10T22:16:35Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24501","html_url":"https://github.com/rails/rails/pull/24501","diff_url":"https://github.com/rails/rails/pull/24501.diff","patch_url":"https://github.com/rails/rails/pull/24501.patch"},"body":"As
        query cache is not a middleware anymore, we need to add some\r\nway to disable
        it.\r\nThis adds a `config.active_record.query_cache` config\r\n\r\nFixes
        this comment https://github.com/rails/rails/pull/23807#issuecomment-208007306\r\n\r\nreview
        @rafaelfranca @matthewd "},{"url":"https://api.github.com/repos/rails/rails/issues/24500","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24500/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24500/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24500/events","html_url":"https://github.com/rails/rails/pull/24500","id":147260995,"number":24500,"title":"Dont
        clean connections on Integration tests","user":{"login":"arthurnn","id":833383,"avatar_url":"https://avatars.githubusercontent.com/u/833383?v=3","gravatar_id":"","url":"https://api.github.com/users/arthurnn","html_url":"https://github.com/arthurnn","followers_url":"https://api.github.com/users/arthurnn/followers","following_url":"https://api.github.com/users/arthurnn/following{/other_user}","gists_url":"https://api.github.com/users/arthurnn/gists{/gist_id}","starred_url":"https://api.github.com/users/arthurnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arthurnn/subscriptions","organizations_url":"https://api.github.com/users/arthurnn/orgs","repos_url":"https://api.github.com/users/arthurnn/repos","events_url":"https://api.github.com/users/arthurnn/events{/privacy}","received_events_url":"https://api.github.com/users/arthurnn/received_events","type":"User","site_admin":true},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"matthewd","id":1034,"avatar_url":"https://avatars.githubusercontent.com/u/1034?v=3","gravatar_id":"","url":"https://api.github.com/users/matthewd","html_url":"https://github.com/matthewd","followers_url":"https://api.github.com/users/matthewd/followers","following_url":"https://api.github.com/users/matthewd/following{/other_user}","gists_url":"https://api.github.com/users/matthewd/gists{/gist_id}","starred_url":"https://api.github.com/users/matthewd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthewd/subscriptions","organizations_url":"https://api.github.com/users/matthewd/orgs","repos_url":"https://api.github.com/users/matthewd/repos","events_url":"https://api.github.com/users/matthewd/events{/privacy}","received_events_url":"https://api.github.com/users/matthewd/received_events","type":"User","site_admin":false},"milestone":{"url":"https://api.github.com/repos/rails/rails/milestones/47","html_url":"https://github.com/rails/rails/milestones/5.0.0","labels_url":"https://api.github.com/repos/rails/rails/milestones/47/labels","id":1467326,"number":47,"title":"5.0.0","description":"","creator":{"login":"rafaelfranca","id":47848,"avatar_url":"https://avatars.githubusercontent.com/u/47848?v=3","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","site_admin":false},"open_issues":18,"closed_issues":425,"state":"open","created_at":"2015-12-18T21:17:59Z","updated_at":"2016-04-15T10:34:01Z","due_on":null,"closed_at":null},"comments":1,"created_at":"2016-04-10T20:15:28Z","updated_at":"2016-04-13T20:40:23Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24500","html_url":"https://github.com/rails/rails/pull/24500","diff_url":"https://github.com/rails/rails/pull/24500.diff","patch_url":"https://github.com/rails/rails/pull/24500.patch"},"body":"###
        Problem\r\nConnections are going back to the pool with open transactions.
        This can cause deadlocks.\r\n\r\n[related to c7b7c6ad1c773102753f1a11b857d0e37ceb6a21]\r\n\r\n###
        Solution\r\nFirst, the action of `clear_active_connections!` should not be
        in the\r\nQueryCache executor. They have different responsibilities.\r\n\r\nThis
        brings `ConnectionManagement` class back, now as an executor\r\ninstead of
        Middleware, however it is only responsible for clearing the\r\nconnections
        on complete. [related to #23807]\r\n\r\nAlso, this adds a flag, so we can
        turn off the clear_connection action on\r\nIntegration tests. \r\n\r\n[fixes
        #24491]\r\n\r\nreview @matthewd @jeremy @rafaelfranca @mfazekas\r\n\r\nTo
        test the deadlocks, i used a variation of @mfazekas''s script, see https://gist.github.com/arthurnn/fbb59a684a75a415a2a8032c0ee99f54\r\nI
        had to change it, because with this implementation, instead of using `rack.test`
        env var, the clear connections action is attached to the IntegrationTest class."},{"url":"https://api.github.com/repos/rails/rails/issues/24499","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24499/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24499/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24499/events","html_url":"https://github.com/rails/rails/pull/24499","id":147257123,"number":24499,"title":"Fix
        PgArray to always deserialize strings with the scripts encoding","user":{"login":"clupprich","id":773,"avatar_url":"https://avatars.githubusercontent.com/u/773?v=3","gravatar_id":"","url":"https://api.github.com/users/clupprich","html_url":"https://github.com/clupprich","followers_url":"https://api.github.com/users/clupprich/followers","following_url":"https://api.github.com/users/clupprich/following{/other_user}","gists_url":"https://api.github.com/users/clupprich/gists{/gist_id}","starred_url":"https://api.github.com/users/clupprich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clupprich/subscriptions","organizations_url":"https://api.github.com/users/clupprich/orgs","repos_url":"https://api.github.com/users/clupprich/repos","events_url":"https://api.github.com/users/clupprich/events{/privacy}","received_events_url":"https://api.github.com/users/clupprich/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"},{"url":"https://api.github.com/repos/rails/rails/labels/PostgreSQL","name":"PostgreSQL","color":"fbca04"}],"state":"open","locked":false,"assignee":{"login":"arthurnn","id":833383,"avatar_url":"https://avatars.githubusercontent.com/u/833383?v=3","gravatar_id":"","url":"https://api.github.com/users/arthurnn","html_url":"https://github.com/arthurnn","followers_url":"https://api.github.com/users/arthurnn/followers","following_url":"https://api.github.com/users/arthurnn/following{/other_user}","gists_url":"https://api.github.com/users/arthurnn/gists{/gist_id}","starred_url":"https://api.github.com/users/arthurnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arthurnn/subscriptions","organizations_url":"https://api.github.com/users/arthurnn/orgs","repos_url":"https://api.github.com/users/arthurnn/repos","events_url":"https://api.github.com/users/arthurnn/events{/privacy}","received_events_url":"https://api.github.com/users/arthurnn/received_events","type":"User","site_admin":true},"milestone":null,"comments":1,"created_at":"2016-04-10T19:48:39Z","updated_at":"2016-04-10T22:11:34Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24499","html_url":"https://github.com/rails/rails/pull/24499","diff_url":"https://github.com/rails/rails/pull/24499.diff","patch_url":"https://github.com/rails/rails/pull/24499.patch"},"body":"###
        Summary\r\n\r\nFixes an issue with Arrays in PostgreSQL, where the encoding
        of the values of the array is changed upon deserialization. The issue is also
        described in #22730:\r\n\r\n### Other Information\r\n\r\nThis PR is based
        on #23619 which was closed because the original idea was that this should
        be fixed upstream in the PG adapter (ged/ruby-pg#11), but @larskanis later
        commented in https://github.com/rails/rails/pull/23619#issuecomment-189924036
        that it''s an issue with Rails/activerecord, not the adapter.\r\n\r\nI see
        that setting the encoding to `__ENCODING__` might not be good enough. Ideally,
        it should be set to the encoding of the connection. Is it safe to access the
        `ConnectionSpecification` instance via `ActiveRecord::Base.connection_pool.spec.config`?
        If so, then I would amend this PR to default to the encoding there and fallback
        to `__ENCODING__` when not available?"},{"url":"https://api.github.com/repos/rails/rails/issues/24493","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24493/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24493/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24493/events","html_url":"https://github.com/rails/rails/pull/24493","id":147231984,"number":24493,"title":"ConncectionPool:
        Prevent reuse of a connection with open transactions","user":{"login":"mfazekas","id":52435,"avatar_url":"https://avatars.githubusercontent.com/u/52435?v=3","gravatar_id":"","url":"https://api.github.com/users/mfazekas","html_url":"https://github.com/mfazekas","followers_url":"https://api.github.com/users/mfazekas/followers","following_url":"https://api.github.com/users/mfazekas/following{/other_user}","gists_url":"https://api.github.com/users/mfazekas/gists{/gist_id}","starred_url":"https://api.github.com/users/mfazekas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mfazekas/subscriptions","organizations_url":"https://api.github.com/users/mfazekas/orgs","repos_url":"https://api.github.com/users/mfazekas/repos","events_url":"https://api.github.com/users/mfazekas/events{/privacy}","received_events_url":"https://api.github.com/users/mfazekas/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"arthurnn","id":833383,"avatar_url":"https://avatars.githubusercontent.com/u/833383?v=3","gravatar_id":"","url":"https://api.github.com/users/arthurnn","html_url":"https://github.com/arthurnn","followers_url":"https://api.github.com/users/arthurnn/followers","following_url":"https://api.github.com/users/arthurnn/following{/other_user}","gists_url":"https://api.github.com/users/arthurnn/gists{/gist_id}","starred_url":"https://api.github.com/users/arthurnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arthurnn/subscriptions","organizations_url":"https://api.github.com/users/arthurnn/orgs","repos_url":"https://api.github.com/users/arthurnn/repos","events_url":"https://api.github.com/users/arthurnn/events{/privacy}","received_events_url":"https://api.github.com/users/arthurnn/received_events","type":"User","site_admin":true},"milestone":null,"comments":3,"created_at":"2016-04-10T15:04:11Z","updated_at":"2016-04-13T15:17:58Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24493","html_url":"https://github.com/rails/rails/pull/24493","diff_url":"https://github.com/rails/rails/pull/24493.diff","patch_url":"https://github.com/rails/rails/pull/24493.patch"},"body":"Checking
        in a connection with an open transaction can lead to flaky issues as thread
        started the transaction might or might not get back the same connection.\r\n\r\nSee
        #24491"},{"url":"https://api.github.com/repos/rails/rails/issues/24491","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24491/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24491/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24491/events","html_url":"https://github.com/rails/rails/issues/24491","id":147227145,"number":24491,"title":"Transaction
        deadlock with rails 5 beta 3","user":{"login":"mfazekas","id":52435,"avatar_url":"https://avatars.githubusercontent.com/u/52435?v=3","gravatar_id":"","url":"https://api.github.com/users/mfazekas","html_url":"https://github.com/mfazekas","followers_url":"https://api.github.com/users/mfazekas/followers","following_url":"https://api.github.com/users/mfazekas/following{/other_user}","gists_url":"https://api.github.com/users/mfazekas/gists{/gist_id}","starred_url":"https://api.github.com/users/mfazekas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mfazekas/subscriptions","organizations_url":"https://api.github.com/users/mfazekas/orgs","repos_url":"https://api.github.com/users/mfazekas/repos","events_url":"https://api.github.com/users/mfazekas/events{/privacy}","received_events_url":"https://api.github.com/users/mfazekas/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"},{"url":"https://api.github.com/repos/rails/rails/labels/attached%20PR","name":"attached
        PR","color":"006b75"},{"url":"https://api.github.com/repos/rails/rails/labels/With%20reproduction%20steps","name":"With
        reproduction steps","color":"009800"}],"state":"open","locked":false,"assignee":{"login":"arthurnn","id":833383,"avatar_url":"https://avatars.githubusercontent.com/u/833383?v=3","gravatar_id":"","url":"https://api.github.com/users/arthurnn","html_url":"https://github.com/arthurnn","followers_url":"https://api.github.com/users/arthurnn/followers","following_url":"https://api.github.com/users/arthurnn/following{/other_user}","gists_url":"https://api.github.com/users/arthurnn/gists{/gist_id}","starred_url":"https://api.github.com/users/arthurnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arthurnn/subscriptions","organizations_url":"https://api.github.com/users/arthurnn/orgs","repos_url":"https://api.github.com/users/arthurnn/repos","events_url":"https://api.github.com/users/arthurnn/events{/privacy}","received_events_url":"https://api.github.com/users/arthurnn/received_events","type":"User","site_admin":true},"milestone":{"url":"https://api.github.com/repos/rails/rails/milestones/47","html_url":"https://github.com/rails/rails/milestones/5.0.0","labels_url":"https://api.github.com/repos/rails/rails/milestones/47/labels","id":1467326,"number":47,"title":"5.0.0","description":"","creator":{"login":"rafaelfranca","id":47848,"avatar_url":"https://avatars.githubusercontent.com/u/47848?v=3","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","site_admin":false},"open_issues":18,"closed_issues":425,"state":"open","created_at":"2015-12-18T21:17:59Z","updated_at":"2016-04-15T10:34:01Z","due_on":null,"closed_at":null},"comments":4,"created_at":"2016-04-10T13:58:37Z","updated_at":"2016-04-10T21:30:54Z","closed_at":null,"body":"###
        Steps to reproduce\r\n\r\nWe have a complex test with rspec, database cleaner,
        factorygirl. Some runs are deadlocking. Debugging showed that there is a transaction
        started but not finished.\r\n\r\nA simplified case:\r\nhttps://gist.github.com/mfazekas/ccf9bee10dc4fe23f39d1da1b914993b\r\n\r\n###
        Expected behavior\r\nPass or error, but not a deadlock\r\n\r\n### Actual behavior\r\n\r\nDeadlock.
        Test doesn''t finish\r\n\r\n### System configuration\r\n**Rails version**:
        5.0.0.beta3\r\n**Ruby version**: 2.3.0\r\n\r\ncannot repro in 4.2.0\r\n"},{"url":"https://api.github.com/repos/rails/rails/issues/24489","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24489/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24489/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24489/events","html_url":"https://github.com/rails/rails/pull/24489","id":147225021,"number":24489,"title":"`number_to_phone`
        extended formatting","user":{"login":"koenpunt","id":351038,"avatar_url":"https://avatars.githubusercontent.com/u/351038?v=3","gravatar_id":"","url":"https://api.github.com/users/koenpunt","html_url":"https://github.com/koenpunt","followers_url":"https://api.github.com/users/koenpunt/followers","following_url":"https://api.github.com/users/koenpunt/following{/other_user}","gists_url":"https://api.github.com/users/koenpunt/gists{/gist_id}","starred_url":"https://api.github.com/users/koenpunt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/koenpunt/subscriptions","organizations_url":"https://api.github.com/users/koenpunt/orgs","repos_url":"https://api.github.com/users/koenpunt/repos","events_url":"https://api.github.com/users/koenpunt/events{/privacy}","received_events_url":"https://api.github.com/users/koenpunt/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activesupport","name":"activesupport","color":"FC9300"}],"state":"open","locked":false,"assignee":{"login":"schneems","id":59744,"avatar_url":"https://avatars.githubusercontent.com/u/59744?v=3","gravatar_id":"","url":"https://api.github.com/users/schneems","html_url":"https://github.com/schneems","followers_url":"https://api.github.com/users/schneems/followers","following_url":"https://api.github.com/users/schneems/following{/other_user}","gists_url":"https://api.github.com/users/schneems/gists{/gist_id}","starred_url":"https://api.github.com/users/schneems/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schneems/subscriptions","organizations_url":"https://api.github.com/users/schneems/orgs","repos_url":"https://api.github.com/users/schneems/repos","events_url":"https://api.github.com/users/schneems/events{/privacy}","received_events_url":"https://api.github.com/users/schneems/received_events","type":"User","site_admin":false},"milestone":null,"comments":1,"created_at":"2016-04-10T13:27:11Z","updated_at":"2016-04-10T13:54:16Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24489","html_url":"https://github.com/rails/rails/pull/24489","diff_url":"https://github.com/rails/rails/pull/24489.diff","patch_url":"https://github.com/rails/rails/pull/24489.patch"},"body":"For
        some countries it might be better suited to split phone numbers\r\ninto more
        than 3 groups. E.g. Dutch phone numbers are often formatted\r\nas `030 123
        45 67`. This change makes an arbitrary amount of groups\r\npossible by using
        the number of captures.\r\n\r\nI''ve also added 2 new tests, one that demonstrates
        that a conversion with `area_code` and `country_code` set results in weird
        concatenation; `+1-(800) 555-1212`, whereas I think it probably should be
        `+1 (800) 555-1212`.\r\n\r\nAlso, there were different regexes for with- and
        without area code, but the tests did still pass when I used the same regex
        for both. So it might be that the tests for that behavior are missing. But
        the differentiation would mean that if a too short phone number, say `1234560`,
        was given to the function, it would not be altered, whereas I think it should
        result in `123-4560`. \r\n"},{"url":"https://api.github.com/repos/rails/rails/issues/24483","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24483/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24483/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24483/events","html_url":"https://github.com/rails/rails/pull/24483","id":147189493,"number":24483,"title":"Possibly
        resolve #24028 - Warn about possible deadlock in Dependencies::Interlock ","user":{"login":"TikiTDO","id":326184,"avatar_url":"https://avatars.githubusercontent.com/u/326184?v=3","gravatar_id":"","url":"https://api.github.com/users/TikiTDO","html_url":"https://github.com/TikiTDO","followers_url":"https://api.github.com/users/TikiTDO/followers","following_url":"https://api.github.com/users/TikiTDO/following{/other_user}","gists_url":"https://api.github.com/users/TikiTDO/gists{/gist_id}","starred_url":"https://api.github.com/users/TikiTDO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TikiTDO/subscriptions","organizations_url":"https://api.github.com/users/TikiTDO/orgs","repos_url":"https://api.github.com/users/TikiTDO/repos","events_url":"https://api.github.com/users/TikiTDO/events{/privacy}","received_events_url":"https://api.github.com/users/TikiTDO/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activesupport","name":"activesupport","color":"FC9300"}],"state":"open","locked":false,"assignee":{"login":"matthewd","id":1034,"avatar_url":"https://avatars.githubusercontent.com/u/1034?v=3","gravatar_id":"","url":"https://api.github.com/users/matthewd","html_url":"https://github.com/matthewd","followers_url":"https://api.github.com/users/matthewd/followers","following_url":"https://api.github.com/users/matthewd/following{/other_user}","gists_url":"https://api.github.com/users/matthewd/gists{/gist_id}","starred_url":"https://api.github.com/users/matthewd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthewd/subscriptions","organizations_url":"https://api.github.com/users/matthewd/orgs","repos_url":"https://api.github.com/users/matthewd/repos","events_url":"https://api.github.com/users/matthewd/events{/privacy}","received_events_url":"https://api.github.com/users/matthewd/received_events","type":"User","site_admin":false},"milestone":null,"comments":1,"created_at":"2016-04-10T03:36:26Z","updated_at":"2016-04-10T08:14:01Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24483","html_url":"https://github.com/rails/rails/pull/24483","diff_url":"https://github.com/rails/rails/pull/24483.diff","patch_url":"https://github.com/rails/rails/pull/24483.patch"},"body":"###
        Summary\r\n\r\nThis is meant as a possible solution to resolve #24028. It
        adds an extra watcher thread to the Dependencies::Interlock class in order
        to watch for potential Deadlocks while autoloading. \r\n\r\n### Other Information\r\n\r\nThis
        doesn''t attempt to resolve the issue of the deadlock, but instead tries to
        warn the user if any threads spend too long in the loading or unloading phase."},{"url":"https://api.github.com/repos/rails/rails/issues/24480","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24480/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24480/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24480/events","html_url":"https://github.com/rails/rails/issues/24480","id":147122010,"number":24480,"title":"Rails
        4.2.6 - has_many through, undefined method ''name'' do nil:NilClass (ruby
        2.3.0, fails only on production)","user":{"login":"kryna","id":3090075,"avatar_url":"https://avatars.githubusercontent.com/u/3090075?v=3","gravatar_id":"","url":"https://api.github.com/users/kryna","html_url":"https://github.com/kryna","followers_url":"https://api.github.com/users/kryna/followers","following_url":"https://api.github.com/users/kryna/following{/other_user}","gists_url":"https://api.github.com/users/kryna/gists{/gist_id}","starred_url":"https://api.github.com/users/kryna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kryna/subscriptions","organizations_url":"https://api.github.com/users/kryna/orgs","repos_url":"https://api.github.com/users/kryna/repos","events_url":"https://api.github.com/users/kryna/events{/privacy}","received_events_url":"https://api.github.com/users/kryna/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"},{"url":"https://api.github.com/repos/rails/rails/labels/needs%20feedback","name":"needs
        feedback","color":"ededed"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":2,"created_at":"2016-04-09T11:37:01Z","updated_at":"2016-04-12T16:43:21Z","closed_at":null,"body":"I
        have prototype model\r\n```ruby\r\nclass ArchMagazine::Prototype < ActiveRecord::Base\r\n  self.table_name
        = ''arch_magazine_prototypes''\r\n\r\n  has_many :custom_dictionaries, through:
        :dictionaries_prototypes, source: :custom_dictionary, foreign_key: :custom_dictionary_id\r\n  has_many
        :dictionaries_prototypes, -> { where(kind: ''normal'') }, dependent: :destroy,
        class_name: ''ArchMagazine::DictionariesPrototype''\r\nend\r\n```\r\nand service\r\n```ruby\r\nclass
        ArchMagazine::UpdatePrototype < ArchMagazine::PrototypeCore\r\n\r\n  def process\r\n    if
        prototype_form.valid?\r\n      prototype.update(prototype_form.prototype_attrs)\r\n      add_custom_dictionaries(prototype,
        true)\r\n    else\r\n      raise ValidationError.new\r\n    end\r\n  end\r\n\r\n  def
        add_custom_dictionaries(prototype, with_destroy = false)\r\n    prototype.custom_dictionaries.destroy_all
        if with_destroy\r\n    prototype_form.custom_dictionary_ids.present? and prototype_form.custom_dictionary_ids.each
        do |dictionary_id|\r\n      create_record(prototype, dictionary_id, ''normal'')\r\n    end\r\n  end\r\n\r\nend\r\n```\r\nWhen
        I''m trying to update prototype object (creating works fine) with some new
        custom_dictionaries_ids, application fails at \r\n```ruby\r\nprototype.custom_dictionaries.destroy_all
        if with_destroy\r\n```\r\nError link (not exactly mine but same active_record
        error): http://pastebin.com/TZugtfrd \r\n\r\nFunny thing is that code from
        my example works on development just fine. **Production** is the problem.
        Some time before, **development** would run on **ruby 2.0.0-p195**, **rails
        4.0.4** and everything were fine. Then I updated **ruby** version on **production**
        to **2.3** and applications started to fail. Situation repeats itself on **development**
        when I updated **ruby** on this environment. After that I updated **rails**
        on **development** to **4.2.6** and everything started to run smoothly. But
        nothing changes on **production** after deploying updated **rails** line in
        **Gemfile**."}]'
    http_version: 
  recorded_at: Fri, 15 Apr 2016 11:43:57 GMT
recorded_with: VCR 3.0.1
